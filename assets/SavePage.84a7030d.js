import{i as j,Q as g,T as y,e as B,g as E,h as R}from"./save.730db860.js";import{c as x}from"./QBtn.fcfb3e52.js";import{z as O,r as a,o as S,s as u,t as w,u as c,M as r,v as o,N as C,x as D,P as m,Q as L,R as N,a1 as Q}from"./index.440a34ad.js";import"./dom.ca3d823f.js";const U={class:"col-3 q-gutter-y-md"},T={class:"col"},q={key:0,class:"q-gutter-md",bordered:""},z=O({__name:"SavePage",setup(A){const h=a(null),t=a(),i=a(!1),d=a(!1);a(null),a(!1),a(!1);const k=Q();S(async()=>{t.value=await j(k.params.id)});const _=async()=>{var f,p;if(t.value===void 0)return;const v=Object.fromEntries(Object.entries(t.value.characters).map(([b,n])=>[b,{...n.levels,initial:n.initial}]).filter(([b,n])=>Object.values(n).reduce((F,V)=>F||Object.keys(V).length!==0,!1))),l=JSON.stringify(v,void 0,2),e=document.createElement("a");e.href=URL.createObjectURL(new Blob([l],{type:"application/json"}));let s=(p=(f=h.value)==null?void 0:f.name)!=null?p:"log";s=s.replace(/\.[^\.]+$/,""),s+=".json",e.download=s,e.click(),URL.revokeObjectURL(e.href)};return(v,l)=>(u(),w(B,{class:"row q-pa-md q-gutter-x-md doc-container"},{default:c(()=>[r("div",U,[r("div",null,[o(g,{modelValue:i.value,"onUpdate:modelValue":l[0]||(l[0]=e=>i.value=e),label:"\u30B9\u30C6\u30FC\u30BF\u30B9\u30ED\u30FC\u30EB\u3092\u8868\u793A"},null,8,["modelValue"])]),r("div",null,[o(g,{modelValue:d.value,"onUpdate:modelValue":l[1]||(l[1]=e=>d.value=e),label:"\u56DE\u6570\u3092\u8868\u793A"},null,8,["modelValue"])]),t.value?(u(),w(y,{key:0,list:t.value.unknown_skills,title:"\u521D\u671F\u5024\u4E0D\u660E\u306E\u6280\u80FD"},null,8,["list"])):C("",!0),o(x,{class:"full-width",disable:t.value===void 0,color:"grey-9",onClick:l[2]||(l[2]=e=>_())},{default:c(()=>[D("json\u5F62\u5F0F\u3067\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9")]),_:1},8,["disable"])]),r("div",T,[t.value?(u(),m("div",q,[(u(!0),m(L,null,N(Object.entries(t.value.characters),([e,s])=>(u(),m("div",{key:e},[o(E,{flat:"",bordered:""},{default:c(()=>[o(R,{label:e,tab:s,headerClass:"text-h6",showStatusRolls:i.value,showSuccessCount:d.value},null,8,["label","tab","showStatusRolls","showSuccessCount"])]),_:2},1024)]))),128))])):C("",!0)])]),_:1}))}});export{z as default};
